(this["webpackJsonpjob-applications-board-tracker"]=this["webpackJsonpjob-applications-board-tracker"]||[]).push([[0],{117:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(19),c=a.n(n),o=a(11),s=(a(117),a(14)),l=a(69),i=(a(118),a(2)),d=a(3),u=a(1),j=["user","component","render"],b=function(e){var t=e.user,a=(e.component,e.render),r=Object(d.a)(e,j);return t&&a?Object(u.jsx)(s.b,Object(i.a)(Object(i.a)({},r),{},{render:a})):Object(u.jsx)(s.b,{render:function(){return Object(u.jsx)(s.a,{to:"/"})}})},m=a(106),p=a(72),h=a(21),O=Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(h.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(u.jsx)(h.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]}),x=Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(h.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(u.jsx)(h.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),f=Object(u.jsx)(r.Fragment,{children:Object(u.jsx)(h.c,{exact:!0,to:"/",className:"nav-link",children:"Home"})}),v=function(e){var t=e.user;return Object(u.jsxs)(p.a,{bg:"dark",variant:"dark",expand:"md",children:[Object(u.jsx)(p.a.Brand,{children:Object(u.jsx)(h.b,{to:"/",style:{color:"#FFF",textDecoration:"none"},children:"react-auth-template"})}),Object(u.jsx)(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.jsx)(p.a.Collapse,{id:"basic-navbar-nav",children:Object(u.jsxs)(m.a,{className:"ml-auto",children:[t&&Object(u.jsxs)("span",{className:"navbar-text mr-2",children:["Welcome, ",t.email]}),f,t?O:x]})})]})},w=a(7),g=a(17),y=a.n(g),C=a(34),k="https://thawing-anchorage-80200.herokuapp.com",I="http://localhost:4741",N="localhost"===window.location.hostname?I:k,T=a(27),S=a.n(T),P=function(e){return S()({method:"POST",url:N+"/sign-up/",data:{credentials:{email:e.email,password:e.password,password_confirmation:e.passwordConfirmation}}})},B=function(e){return S()({url:N+"/sign-in/",method:"POST",data:{credentials:{email:e.email,password:e.password}}})},E=function(e){return S()({url:N+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})},z=function(e,t){return S()({url:N+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(t.token)},data:{passwords:{old:e.oldPassword,new:e.newPassword}}})},D=a(41),F=Object(D.b)({name:"Authentication",initialState:{user:null},reducers:{setUser:function(e,t){e.user=t.payload},clearUser:function(e){e.user=null}}}),H=F.actions,A=F.reducer,L=Object(D.b)({name:"Board",initialState:{board:null},reducers:{setBoard:function(e,t){e.board=t.payload},addColumn:function(e,t){e.board.push(t.payload)},editColumn:function(e,t){e.board[t.payload.index]=t.payload.newColumn},deleteColumn:function(e,t){e.board.splice(t.payload,1)},addCell:function(e,t){e.board[t.payload.columnID].push(t.payload)},editCell:function(e,t){e.board[t.payload.columnID]=t.payload.newCell},deleteCell:function(e,t){e.board[t.payload.columnID].splice(t.payload,1)},move:function(e,t){var a=e.board.columns.find((function(e){return e._id===t.payload.source.droppableId})).cells.splice(t.payload.source.index,1),r=Object(w.a)(a,1)[0];e.board.columns.find((function(e){return e._id===t.payload.destination.droppableId})).cells.splice(t.payload.destination.index,0,r)}}}),q=L.actions,G=L.reducer,U=function(e){return function(t){var a=function(){var a=Object(C.a)(y.a.mark((function a(){var r,n,c;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B(e);case 2:r=a.sent,n=r.data.user,c=r.data.board,t(q.setBoard(c)),t(H.setUser(n));case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();try{a(e)}catch(r){console.error(r)}}},_=a(13),R=a(39),J=Object(s.f)((function(e){var t=Object(o.c)(),a=Object(r.useState)(""),n=Object(w.a)(a,2),c=n[0],s=n[1],l=Object(r.useState)(""),i=Object(w.a)(l,2),d=i[0],j=i[1],b=Object(r.useState)(""),m=Object(w.a)(b,2),p=m[0],h=m[1],O={email:c,password:d,passwordConfirmation:p};Object(r.useEffect)((function(){}),[O]);var x=function(e){"email"===e.target.name&&s(e.target.value),"password"===e.target.name&&j(e.target.value),"passwordConfirmation"===e.target.name&&h(e.target.value)};return Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Sign Up"}),Object(u.jsxs)(_.a,{onSubmit:function(a){a.preventDefault(),t(function(e){return function(t){var a=function(){var a=Object(C.a)(y.a.mark((function a(){var r,n;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P(e);case 2:r=a.sent,n=r.data.user,t(H.setUser(n));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();try{a(e)}catch(r){console.error(r)}}}(O)),e.history.push("/")},children:[Object(u.jsxs)(_.a.Group,{controlId:"email",children:[Object(u.jsx)(_.a.Label,{children:"Email address"}),Object(u.jsx)(_.a.Control,{required:!0,type:"email",name:"email",value:c,placeholder:"Enter email",onChange:x})]}),Object(u.jsxs)(_.a.Group,{controlId:"password",children:[Object(u.jsx)(_.a.Label,{children:"Password"}),Object(u.jsx)(_.a.Control,{required:!0,name:"password",value:d,type:"password",placeholder:"Password",onChange:x})]}),Object(u.jsxs)(_.a.Group,{controlId:"passwordConfirmation",children:[Object(u.jsx)(_.a.Label,{children:"Password Confirmation"}),Object(u.jsx)(_.a.Control,{required:!0,name:"passwordConfirmation",value:p,type:"password",placeholder:"Confirm Password",onChange:x})]}),Object(u.jsx)(R.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})})),W=Object(s.f)((function(e){var t=Object(o.c)(),a=Object(r.useState)(""),n=Object(w.a)(a,2),c=n[0],s=n[1],l=Object(r.useState)(""),i=Object(w.a)(l,2),d=i[0],j=i[1],b={email:c,password:d};Object(r.useEffect)((function(){}),[b]);var m=function(e){"email"===e.target.name?s(e.target.value):j(e.target.value)},p=function(){var a=Object(C.a)(y.a.mark((function a(r){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.next=3,t(U(b));case 3:e.history.push("/");case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Sign In"}),Object(u.jsxs)(_.a,{onSubmit:p,children:[Object(u.jsxs)(_.a.Group,{controlId:"email",children:[Object(u.jsx)(_.a.Label,{children:"Email address"}),Object(u.jsx)(_.a.Control,{required:!0,type:"email",name:"email",value:b.email,placeholder:"Enter email",onChange:m})]}),Object(u.jsxs)(_.a.Group,{controlId:"password",children:[Object(u.jsx)(_.a.Label,{children:"Password"}),Object(u.jsx)(_.a.Control,{required:!0,name:"password",value:b.password,type:"password",placeholder:"Password",onChange:m})]}),Object(u.jsx)(R.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})})),M=Object(s.f)((function(e){return Object(o.c)()(function(e){return function(t){var a=function(){var a=Object(C.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E(e);case 2:t(H.clearUser());case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();try{a(e)}catch(r){console.error(r)}}}(Object(o.d)((function(e){return e.auth.user})))),""})),Y=Object(s.f)((function(e){var t=Object(o.c)(),a=Object(o.d)((function(e){return e.auth.user})),n=Object(r.useState)(""),c=Object(w.a)(n,2),s=c[0],l=c[1],i=Object(r.useState)(""),d=Object(w.a)(i,2),j=d[0],b=d[1],m={oldPassword:s,newPassword:j};Object(r.useEffect)((function(){}),[m]);var p=function(e){"oldPassword"===e.target.name?l(e.target.value):b(e.target.value)};return Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(u.jsx)("h3",{children:"Change Password"}),Object(u.jsxs)(_.a,{onSubmit:function(r){r.preventDefault(),t(function(e,t){return function(){var a=function(){var a=Object(C.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:z(e,t);case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();try{a()}catch(r){console.error(r)}}}(m,a)),e.history.push("/")},children:[Object(u.jsxs)(_.a.Group,{controlId:"oldPassword",children:[Object(u.jsx)(_.a.Label,{children:"Old password"}),Object(u.jsx)(_.a.Control,{required:!0,name:"oldPassword",value:s,type:"password",placeholder:"Old Password",onChange:p})]}),Object(u.jsxs)(_.a.Group,{controlId:"newPassword",children:[Object(u.jsx)(_.a.Label,{children:"New Password"}),Object(u.jsx)(_.a.Control,{required:!0,name:"newPassword",value:j,type:"password",placeholder:"New Password",onChange:p})]}),Object(u.jsx)(R.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})})),K=Object(D.b)({name:"Modal",initialState:{show:!1,modalType:null,elementId:null},reducers:{modalSwitch:function(e,t){e.modalType=t.payload.modalType,e.elementId=t.payload.elementId,e.show=!e.show}}}),Q=K.actions,V=K.reducer,X=Object(D.a)({reducer:{auth:A,board:G,modal:V}}),Z=function(e){return S()({method:"POST",url:N+"/column/",headers:{Authorization:"Bearer ".concat(e.token)},data:{elementId:e.elementId,form:e.form}})},$=function(e){return S()({url:N+"/cell/",method:"POST",headers:{Authorization:"Bearer ".concat(e.token)},data:{elementId:e.elementId,form:e.form}})},ee=function(e){return S()({url:N+"/column/",method:"PUT",headers:{Authorization:"Bearer ".concat(e.token)},data:{source:e.source,destination:e.destination}})},te=function(e){return S()({url:N+"/column/"+e.elementId,method:"PATCH",headers:{Authorization:"Bearer ".concat(e.token)},data:{elementId:e.elementId,form:e.form}})},ae=function(e){return S()({url:N+"/cell/"+e.elementId,method:"PATCH",headers:{Authorization:"Bearer ".concat(e.token)},data:{elementId:e.elementId,form:e.form}})},re=function(e){return S()({url:N+"/column/"+e.elementId,method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})},ne=function(e){return S()({url:N+"/cell/"+e.elementId,method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})},ce=a(151),oe=a(155),se=a(152),le=a(104),ie=a(150),de=a(107),ue=a(154),je=a(57),be=function(e){var t=Object(o.c)(),a=Q.modalSwitch,r=e.id,n=e.index,c=e.company;return Object(u.jsx)(je.b,{draggableId:r,index:n,children:function(e){return Object(u.jsx)(ue.a,Object(i.a)(Object(i.a)(Object(i.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,id:r,className:"bg-color-primary border border-dark cell",children:Object(u.jsxs)(oe.a,{className:"d-flex",children:[Object(u.jsx)("img",{src:"https://icongr.am/devicon/google-original.svg?size=14&color=currentColor"}),Object(u.jsx)("div",{className:"mx-auto text-center pt-2",children:c}),Object(u.jsxs)(ie.a,{variant:"link",id:"dropdown-basic-button",title:Object(u.jsx)("img",{src:"https://icongr.am/entypo/dots-three-vertical.svg?size=14&color=currentColor"}),children:[Object(u.jsx)(de.a.Item,{onClick:function(){t(a({modalType:"edit-cell",elementId:r}))},children:"Edit Cell"}),Object(u.jsx)(de.a.Item,{onClick:function(){t(a({modalType:"delete-cell",elementId:r}))},children:"Delete Cell"})]})]})}))}})},me=function(e){var t=Object(o.c)(),a=Q.modalSwitch,r=e.id,n=e.name,c=e.cells;return Object(u.jsx)(le.a,{className:"column border border-dark fluid m-3 pb-3",children:Object(u.jsx)(je.c,{droppableId:r,children:function(e){return Object(u.jsxs)("div",Object(i.a)(Object(i.a)({},e.droppableProps),{},{ref:e.innerRef,id:r,children:[Object(u.jsxs)(oe.a,{className:"d-flex",children:[Object(u.jsx)("h6",{className:"text-center pt-2",children:n}),Object(u.jsxs)(ie.a,{className:"ms-auto",variant:"link",id:"dropdown-basic-button",title:Object(u.jsx)("img",{src:"https://icongr.am/entypo/dots-three-horizontal.svg?size=14&color=currentColor"}),children:[Object(u.jsx)(de.a.Item,{onClick:function(){t(a({modalType:"edit-column",elementId:r}))},children:"Rename Column"}),Object(u.jsx)(de.a.Item,{onClick:function(){t(a({modalType:"delete-column",elementId:r}))},children:"Delete Column"}),Object(u.jsx)(de.a.Divider,{}),Object(u.jsx)(de.a.Item,{onClick:function(){t(a({modalType:"create-cell",elementId:r}))},children:"New Cell"})]})]}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(u.jsx)(be,Object(i.a)(Object(i.a)({id:e._id},e),{},{index:t}),e._id)})),e.placeholder]}))}})})},pe=function(){var e=Object(o.c)(),t=Q.modalSwitch,a=Object(o.d)((function(e){return e.board.board})),r=a._id;return Object(u.jsxs)(ce.a,{id:"board",className:"border border-dark",children:[Object(u.jsxs)(oe.a,{className:"d-flex",children:[Object(u.jsx)("div",{className:"text-center pt-2",children:"Board Job Tracker"}),Object(u.jsxs)(R.a,{variant:"outline-link",className:"ms-auto p-2",onClick:function(){e(t({modalType:"create-column",elementId:r}))},children:["New Column",Object(u.jsx)("img",{className:"ms-2",src:"https://icongr.am/clarity/add.svg?size=20&color=currentColor"})]})]}),Object(u.jsx)(je.a,{onDragEnd:function(t){if(t.destination){var a,r=t.source,n=t.destination;e((a={source:r,destination:n},function(){var e=Object(C.a)(y.a.mark((function e(t){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X.getState().auth.user.token,e.prev=1,t(q.move(Object(i.a)({},a))),e.next=5,ee(Object(i.a)({token:r},a));case 5:if(!e.sent){e.next=10;break}l.b.success("Saved",{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0}),e.next=11;break;case 10:throw new Error("Could not save on cloud!");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),l.b.error(e.t0,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()))}},children:Object(u.jsx)(se.a,{children:a.columns.map((function(e,t){return Object(u.jsx)(me,Object(i.a)({id:e._id},e),t)}))})})]})},he=a(59),Oe=a(153),xe=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(_.a.Label,{htmlFor:"name",children:e}),Object(u.jsx)(_.a.Control,{type:"text",id:"name","aria-describedby":"textHelpBlock",required:!0})]})},fe=a(105),ve=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(fe.a,{htmlFor:"company",label:"Company Name".concat(e),children:Object(u.jsx)(_.a.Control,{size:"sm",type:"text",id:"company","aria-describedby":"textHelpBlock",placeholder:"1",required:"*"===e})}),Object(u.jsx)(fe.a,{htmlFor:"position",label:"Position Title".concat(e),children:Object(u.jsx)(_.a.Control,{size:"sm",type:"text",id:"position","aria-describedby":"textHelpBlock",placeholder:"1",required:"*"===e})}),Object(u.jsx)(fe.a,{htmlFor:"location",label:"Location".concat(e),children:Object(u.jsx)(_.a.Control,{size:"sm",type:"text",id:"location","aria-describedby":"textHelpBlock",placeholder:"1",required:"*"===e})}),Object(u.jsx)(fe.a,{htmlFor:"contactName",label:"Contact Name",children:Object(u.jsx)(_.a.Control,{size:"sm",type:"text",id:"contactName","aria-describedby":"textHelpBlock",placeholder:"1"})}),Object(u.jsx)(fe.a,{htmlFor:"contactTitle",label:"Contact Title",children:Object(u.jsx)(_.a.Control,{size:"sm",type:"text",id:"contactTitle","aria-describedby":"textHelpBlock",placeholder:"1"})}),Object(u.jsx)(fe.a,{htmlFor:"contactEmail",label:"Contact Email",children:Object(u.jsx)(_.a.Control,{size:"sm",type:"email",id:"contactEmail","aria-describedby":"emailHelpBlock",placeholder:"1"})}),Object(u.jsx)(fe.a,{htmlFor:"description",label:"Description",children:Object(u.jsx)(_.a.Control,{id:"description",as:"textarea",placeholder:"Write a description here",style:{height:"150px"}})})]})},we=function(e){return Object(u.jsxs)(_.a.Label,{children:["You are about to",Object(u.jsxs)("b",{children:[e,"."]})," Are you sure ?"]})},ge=function(e){var t=[],a=t[0],r=t[1],n=t[2],c=t[3],o=t[4];switch(e){case"create-column":a="New Column",c="Create Column",r=xe("Enter Name"),n=Z;break;case"create-cell":a="New Cell",c="Create Cell",r=ve("*"),n=$;break;case"edit-column":a="Rename Column",c="Submit",r=xe("Enter New Name"),n=te;break;case"edit-cell":a="Edit Cell",c="Submit",r=ve(""),n=ae;break;case"delete-column":c="Confirm",r=we(a="Delete Column"),n=re,o=!0;break;case"delete-cell":c="Confirm",r=we(a="Delete Cell"),n=ne,o=!0}return{modalTitle:a,modalBody:r,apiCall:n,buttonText:c,danger:o}},ye=function(e){var t=Object(o.c)(),a=Q.modalSwitch,r=Object(o.d)((function(e){return e.auth.user})),n=Object(o.d)((function(e){return e.modal})),c=n.modalType,s=n.elementId,l=n.show,i=ge(c),d=i.modalTitle,j=i.modalBody,b=i.apiCall,m=i.apiData,p=i.buttonText,h=i.danger;return Object(u.jsxs)(Oe.a,{show:l,onHide:function(){return t(a({modalType:null,elementId:null}))},centered:!0,children:[Object(u.jsx)(Oe.a.Header,{closeButton:!0,children:Object(u.jsx)(Oe.a.Title,{children:d})}),Object(u.jsxs)(_.a,{onSubmit:function(e){if(e.preventDefault(),m={token:r.token,elementId:s,form:{}},"name"!==e.currentTarget[0].id){var a,n=Object(he.a)(e.currentTarget);try{for(n.s();!(a=n.n()).done;){var c=a.value;c&&(m.form[c.id]=c.value)}}catch(i){n.e(i)}finally{n.f()}}else m.form.name=e.currentTarget[0].value;var o,l;t((o=b,l=m,function(){var e=Object(C.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(l);case 3:return e.next=5,r=l.token,S()({method:"GET",url:N+"/board/",headers:{Authorization:"Bearer ".concat(r)}});case 5:a=e.sent,t(q.setBoard(a.data.board)),t(Q.modalSwitch({modalType:null,elementId:null})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}var r}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(u.jsx)(Oe.a.Body,{children:Object(u.jsx)(_.a.Group,{className:"mb-3",children:j})}),Object(u.jsxs)(Oe.a.Footer,{children:[Object(u.jsx)(R.a,{variant:"secondary",onClick:function(){return t(a({modalType:null,elementId:null}))},children:"Cancel"}),Object(u.jsx)(R.a,{type:"submit",variant:h&&"danger",children:p})]})]})]})},Ce=function(){var e=Object(o.d)((function(e){return e.auth.user}));return Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(v,{user:e}),Object(u.jsxs)("main",{className:"container",children:[Object(u.jsx)(s.b,{path:"/sign-up",render:function(){return Object(u.jsx)(J,{})}}),Object(u.jsx)(s.b,{path:"/sign-in",render:function(){return Object(u.jsx)(W,{})}}),Object(u.jsx)(b,{path:"/sign-out",user:e,render:function(){return Object(u.jsx)(M,{})}}),Object(u.jsx)(b,{path:"/change-password",user:e,render:function(){return Object(u.jsx)(Y,{})}}),Object(u.jsx)(b,{exact:!0,path:"/",user:e,render:function(){return Object(u.jsx)(pe,{})}})]}),Object(u.jsx)(l.a,{position:"top-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!1}),Object(u.jsx)(ye,{user:e})]})},ke=Object(u.jsx)(h.a,{basename:"/job-applications-board-tracker",children:Object(u.jsx)(o.a,{store:X,children:Object(u.jsx)(Ce,{})})});c.a.render(ke,document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.80882084.chunk.js.map